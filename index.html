<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта с геолокацией</title>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=cfcc5dee-0d3e-4cd5-9867-f453cd81ae64&lang=ru_RU" type="text/javascript"></script>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            width: 100%;
            height: 80vh;
        }
        .controls {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
        }
        .controls button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        .address {
            width: 100%;
            max-width: 600px;
            margin: 10px auto;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="controls">
        <button onclick="findLocation()">Найти</button>
    </div>
    <div class="address" id="address"></div>

    <script>
        // Инициализация карты
        ymaps.ready(init);
        
        function init() {
            var myMap = new ymaps.Map('map', {
                center: [55.76, 37.64],
                zoom: 10
            });
            
            var myPlacemark = new ymaps.Placemark([55.76, 37.64], {
                hintContent: 'Ваш адрес',
                balloonContent: 'Нажмите "Найти" для определения местоположения'
            });
            
            myMap.geoObjects.add(myPlacemark);
            
            function findLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        var coords = [
                            position.coords.latitude,
                            position.coords.longitude
                        ];
                        
                        myPlacemark.geometry.setCoordinates(coords);
                        myMap.panTo(coords);
                        
                        // Получаем адрес по координатам
                        ymaps.geocode(coords).then(function (res) {
                            var first = res.geoObjects.get(0);
                            var address = first.properties.get('text');
                            document.getElementById('address').textContent = address;
                        });
                    }, function() {
                        alert('Не удалось определить ваше местоположение');
                    });
                } else {
                    alert('Ваш браузер не поддерживает геолокацию');
                }
            }
        }
    </script>
</body>
</html>
